<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
  <meta charset="UTF-8">
  <title>main</title>
</head>
<body>


<div class="sidebar">

  <section id="head">
    <h1>Create new Vote:</h1>

    <div id="surveyNameInput">
      <mat-form-field [ngStyle]="{'width.ch': inputText.value.length, 'min-width.ch': 40, 'max-width.ch': 60}">
        <mat-label>Survey Name</mat-label>
        <input matInput #inputText class="inputfield" type="text" [(ngModel)]="this.editor.vote.name" required>
      </mat-form-field> <br>
    </div>
    <br/>

    <div id="expirationDateInput">
      <mat-label>Expiration</mat-label><br/>
      <input  class="inputfield" type="datetime-local" id="timeinputfield" [(ngModel)]="this.editor.vote.lifetime" required><br/>
    </div>

  </section>


    <section id="questionList">
      <h2>Questions:</h2>
      <ul>
        <li *ngFor="let question of editor.vote.questions">
          <div class="questiontitle" (click)="this.next = false; showQuestion(question)">
            {{question.title}}

            <button id="delete" mat-icon-button (click)="deleteQuestion(question)">
              <mat-icon>delete</mat-icon>
            </button>

          </div>
        </li>
      </ul>
    </section>


  <div *ngIf="!this.next" class="questionwindow">

    <ul class="questioneditor">
      <li *ngFor="let question of editor.vote.questions">
        <question *ngIf="question.visible" [question]="question"></question>
      </li>
    </ul>

  </div>

</div>
<section id="emaillist">
<div *ngIf="this.next" class="questionwindow">
  <ul >
    <label class="label" for="emailInput">Enter an Email:</label>
    <mat-form-field [ngStyle]="{'width.ch': inputText.value.length, 'min-width.ch': 20, 'max-width.ch': 30}">
      <input matInput type="email" #inputText class="inputfield" id="emailInput" [(ngModel)]="this.tempEmail" (blur)="addEmail()">
      <mat-label id="inputfield">Enter here...</mat-label>
    </mat-form-field>
    <li *ngFor="let email of this.editor.vote.emails" class="emailstyle">
      {{email}}
      <button id="delete" mat-icon-button (click)="deleteEmail(email)">
        <mat-icon>delete</mat-icon>
      </button>
<!--      <img src="../../../assets/deleteButton.png" width="20px" (click)="this.deleteEmail(email)">-->
    </li>
  </ul>
</div>
</section>
<div *ngIf="!this.next" class="nextButton">
  <input type="image" src="../../../assets/next_btn.png" width="125%" height="125%" (click)="this.next = true">
</div>

<div *ngIf="this.next" class="nextButton">
  <input type="image" src="../../../assets/submit_btn.png" width="125%" height="125%" (click)="printEncrypted()">
</div>


<div *ngIf="!this.next" class="newQuestionButton">
  <input type="image" src="../../assets/addQuestion_btn.png" width="125%" height="125%" (click)="addEmptyQuestion()"/>
</div>

<div *ngIf="this.next" class="newQuestionButton">
  <input type="image" src="../../assets/addVoter_btn.png" width="125%" height="125%" (click)="addEmail()"/>
</div>

<div *ngIf="this.next" class="returnToMainButton">
  <input type="image" src="../../assets/back_btn.png" width="125%" height="125%" (click)="this.next = false; this.printDecrypted()"/>
</div>

<div *ngIf="!this.next" class="returnToMainButton">
  <img src="../../../assets/returnToMain_btn.png" width="125%" height="125%" routerLink="/main" (click)="this.deleteEverything()"/>
</div>
</body>
</html>

