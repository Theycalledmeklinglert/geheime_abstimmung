<mat-spinner id="spinner" *ngIf="!this.loaded"></mat-spinner>

<div *ngIf="this.errorMessage == undefined && !this.submited && this.loaded">
<div id="head">
  {{this.poll.name}}
</div>

<div id="body">

  <form [formGroup]="surveyForm" >
    <ul *ngFor="let question of this.poll.questions">
      <li>
        <surveyQuestion
          [question]="question"
          [parentForm]="surveyForm"
        ></surveyQuestion>
        <mat-divider></mat-divider>
      </li>
    </ul>
  </form>
</div>

  <div id="submitButton">
    <button mat-flat-button color="primary" [disabled]="this.surveyForm.disable && this.surveyForm.invalid" (click)="openDialog()" >Submit</button>
  </div>


  <ng-template #callAPIDialog>
  <mat-dialog-content class="mat-typography">
    <h2>Submit survey?</h2>
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-button mat-dialog-close>Cancel</button>
    <button mat-button [mat-dialog-close]="true" cdkFocusInitial (click)="submitSurvey()">Submit</button>
  </mat-dialog-actions>
</ng-template>

</div>

<div class="altView" *ngIf="this.submited">
  Survey submitted<br>
  <mat-icon color="primary" id="submittedIcon">check_circle_outline</mat-icon>
  <p>(You can close the Tab)</p>
</div>

<div class="altView" *ngIf="this.errorMessage != undefined">
  Error <br>
  <p>{{this.errorMessage}}</p>
</div>

<button mat-flat-button color="primary" id="debug" (click)="debug()">Debug</button>
